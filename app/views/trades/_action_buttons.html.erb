<%# locals: (trade:) %>
<div id="trade_action_buttons" class="flex items-center gap-2">
  <% un = params[:username] %>
  <% can_edit = trade.can_modify?(Current.user) %>

  <% if can_edit %>
    <button type="submit" form="trade_edit_form"
        class="px-4 py-2 text-sm rounded-sm bg-crusta-400 text-woodsmoke-950 font-medium hover:bg-crusta-300 transition-colors cursor-pointer">
      <%= trade.draft? ? 'Propose Trade' : 'Re-propose Trade' %>
    </button>
  <% end %>

  <% if trade.draft? && trade.initiator_id == Current.user.id %>
    <%= button_to "Delete", trade_path(username: un, id: trade), method: :delete,
        data: { turbo_confirm: "Delete this draft?" },
        class: "px-4 py-2 text-sm rounded-sm bg-woodsmoke-800 text-woodsmoke-300 hover:bg-woodsmoke-700 transition-colors cursor-pointer" %>

  <% elsif trade.proposed? && trade.proposed_by_id != Current.user.id %>
    <%= button_to "Accept", accept_trade_path(username: un, id: trade), method: :patch,
        class: "px-4 py-2 text-sm rounded-sm bg-green-600 text-white font-medium hover:bg-green-500 transition-colors cursor-pointer" %>
    <%= button_to "Decline", decline_trade_path(username: un, id: trade), method: :patch,
        data: { turbo_confirm: "Decline this trade?" },
        class: "px-4 py-2 text-sm rounded-sm bg-red-600 text-white font-medium hover:bg-red-500 transition-colors cursor-pointer" %>

  <% elsif trade.proposed? && trade.proposed_by_id == Current.user.id %>
    <%= button_to "Cancel", cancel_trade_path(username: un, id: trade), method: :patch,
        data: { turbo_confirm: "Cancel this trade proposal?" },
        class: "px-4 py-2 text-sm rounded-sm bg-woodsmoke-800 text-woodsmoke-300 hover:bg-woodsmoke-700 transition-colors cursor-pointer" %>
  <% end %>
</div>
