<%# locals: (trade:, shipment:) %>
<% url = shipment.persisted? ? trade_trade_shipment_path(username: params[:username], trade_id: trade, id: shipment) : trade_trade_shipments_path(username: params[:username], trade_id: trade) %>
<% method = shipment.persisted? ? :patch : :post %>

<%= form_with model: shipment, url: url, method: method, data: { turbo_stream: true } do |f| %>
  <div class="space-y-3">
    <div>
      <label class="block text-[10px] text-woodsmoke-400 mb-1">Carrier</label>
      <%= f.text_field :carrier, placeholder: "e.g. USPS, UPS, FedEx",
          class: "w-full bg-woodsmoke-950 border border-woodsmoke-800 rounded-sm px-3 py-1.5 text-sm text-woodsmoke-100 placeholder-woodsmoke-500 focus:border-crusta-400 focus:outline-none" %>
    </div>
    <div>
      <label class="block text-[10px] text-woodsmoke-400 mb-1">Tracking Number</label>
      <%= f.text_field :tracking_number, placeholder: "Enter tracking number",
          class: "w-full bg-woodsmoke-950 border border-woodsmoke-800 rounded-sm px-3 py-1.5 text-sm text-woodsmoke-100 placeholder-woodsmoke-500 focus:border-crusta-400 focus:outline-none" %>
    </div>
    <% if shipment.persisted? %>
      <div>
        <label class="block text-[10px] text-woodsmoke-400 mb-1">Status</label>
        <%= f.select :status, TradeShipment::STATUSES.map { |s| [s.titleize, s] },
            {}, class: "w-full bg-woodsmoke-950 border border-woodsmoke-800 rounded-sm px-3 py-1.5 text-sm text-woodsmoke-100 focus:border-crusta-400 focus:outline-none" %>
      </div>
    <% end %>
    <div>
      <%= f.submit shipment.persisted? ? "Update Shipment" : "Mark as Shipped",
          class: "px-4 py-1.5 text-sm rounded-sm bg-crusta-400 text-woodsmoke-950 font-medium hover:bg-crusta-300 transition-colors cursor-pointer" %>
    </div>
  </div>
<% end %>
