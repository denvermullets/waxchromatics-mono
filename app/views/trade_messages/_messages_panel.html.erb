<%# locals: (trade:, messages:) %>
<div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-4 flex flex-col">
  <h3 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-wider mb-4">Messages</h3>

  <%= turbo_stream_from trade, :messages, Current.user %>

  <div id="trade_messages"
       class="flex flex-col gap-2 overflow-y-auto mb-4 min-h-[200px] max-h-[400px]">
    <p class="text-xs text-woodsmoke-500 self-center my-auto hidden only:block">No messages yet. Start the conversation!</p>
    <% messages.each do |message| %>
      <%= render "trade_messages/message", trade_message: message, own: message.user_id == Current.user.id %>
    <% end %>
  </div>

  <%= render "trade_messages/form", trade: trade %>
</div>
