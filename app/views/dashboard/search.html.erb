<%= turbo_frame_tag "search-results" do %>
  <%# Turbo Stream subscription for real-time updates from background jobs %>
  <%= turbo_stream_from "search_updates" %>

  <% if @query.present? %>
    <div class="mt-4">
      <p class="text-sm text-woodsmoke-400 mb-4">
        Showing results for
        <span class="font-bold text-woodsmoke-200">"<%= @query %>"</span>
      </p>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <%# Left column %>
        <div class="lg:col-span-2 space-y-8">
          <% if @top_artist.present? %>
            <%= render "dashboard/top_result" %>
          <% end %>

          <%= render "dashboard/local_results_section" %>
        </div>

        <%# Right column %>
        <div class="lg:col-span-1">
          <%= render "dashboard/related_artists" %>
          <%= render "dashboard/key_releases" %>
          <%= render "dashboard/search_tips" %>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
