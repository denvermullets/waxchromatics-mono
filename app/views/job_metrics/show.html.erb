<div class="max-w-7xl mx-auto px-5 py-8">
  <h1 class="text-xl font-bold text-crusta-400 mb-6">Job Metrics</h1>

  <%# Range tabs %>
  <div class="flex gap-2 mb-6">
    <% %w[1h 24h 7d 30d].each do |range| %>
      <%= link_to range,
            job_metrics_path(range: range),
            class: "px-3 py-1.5 text-sm rounded-sm transition-colors #{@range == range ? 'bg-woodsmoke-800 text-woodsmoke-50' : 'text-woodsmoke-400 hover:text-woodsmoke-50 hover:bg-woodsmoke-800/50'}" %>
    <% end %>
  </div>

  <%# Stats cards %>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
    <div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-5">
      <h2 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-widest mb-2">Processed</h2>
      <p class="text-2xl font-bold text-crusta-400"><%= number_with_delimiter(@finished_count) %></p>
    </div>
    <div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-5">
      <h2 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-widest mb-2">In Progress</h2>
      <p class="text-2xl font-bold text-bright-turquoise-400"><%= number_with_delimiter(@in_progress_count) %></p>
    </div>
    <div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-5">
      <h2 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-widest mb-2">Queued</h2>
      <p class="text-2xl font-bold text-woodsmoke-50"><%= number_with_delimiter(@queued_count) %></p>
    </div>
    <div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-5">
      <h2 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-widest mb-2">Failed</h2>
      <p class="text-2xl font-bold text-azalea-400"><%= number_with_delimiter(@failed_count) %></p>
    </div>
  </div>

  <%# Line chart %>
  <div class="bg-woodsmoke-925 border border-woodsmoke-800 rounded-sm p-6">
    <h2 class="text-xs font-semibold text-woodsmoke-400 uppercase tracking-widest mb-4">Jobs Over Time</h2>
    <div class="h-72">
      <canvas
        data-controller="chart"
        data-chart-type-value="line"
        data-chart-labels-value="<%= @labels.to_json %>"
        data-chart-datasets-value="<%= [
          { label: 'Enqueued', data: @enqueued_series, color: '#f97316' },
          { label: 'Finished', data: @finished_series, color: '#06b6d4' }
        ].to_json %>"
      ></canvas>
    </div>
  </div>
</div>
