<div>
  <h2 class="text-xs font-semibold uppercase tracking-wider text-woodsmoke-400 mb-4"><%= @releases.size %> Versions</h2>

  <% if @releases.any? %>
    <div class="space-y-2">
      <% @releases.each do |release| %>
        <%= link_to release_path(release), class: "block p-4 rounded-lg border border-woodsmoke-700 bg-woodsmoke-800 hover:border-crusta-400 hover:border-l-crusta-400 hover:border-l-2 transition-colors" do %>
          <div class="flex items-start gap-4">
            <%= render "shared/cover_art", size: :md %>

            <div class="flex-1 min-w-0">
              <div class="flex flex-wrap items-center gap-2 text-sm">
                <% label = release.release_labels.first %>
                <% if label&.catalog_number.present? %>
                  <span class="font-medium text-woodsmoke-50"><%= label.catalog_number %></span>
                <% end %>
                <% if label&.label %>
                  <span class="text-woodsmoke-400"><%= label.label.name %></span>
                <% end %>
                <% if release.country.present? %>
                  <span class="text-woodsmoke-500">Â·</span>
                  <span class="text-woodsmoke-400"><%= release.country %></span>
                <% end %>
              </div>

              <% formats = release.release_formats %>
              <% if formats.any? %>
                <div class="mt-1 flex flex-wrap gap-1">
                  <% formats.each do |fmt| %>
                    <span class="px-1.5 py-0.5 text-xs rounded bg-woodsmoke-700 text-woodsmoke-300"><%= fmt.name %></span>
                    <% if fmt.descriptions.present? %>
                      <% fmt.descriptions.split(";").map(&:strip).reject(&:blank?).each do |desc| %>
                        <span class="px-1.5 py-0.5 text-xs rounded bg-woodsmoke-700 text-woodsmoke-300"><%= desc %></span>
                      <% end %>
                    <% end %>
                    <% if fmt.color.present? %>
                      <% fmt.color.split(",").map(&:strip).reject(&:blank?).each do |color| %>
                        <span class="px-1.5 py-0.5 text-xs rounded bg-bright-turquoise-950 text-bright-turquoise-300"><%= color %></span>
                      <% end %>
                    <% end %>
                  <% end %>
                </div>
              <% end %>
            </div>

            <% if release.released.present? %>
              <span class="shrink-0 text-sm text-woodsmoke-400"><%= release.released %></span>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="p-8 text-center rounded-xl border border-woodsmoke-800 bg-woodsmoke-900">
      <p class="text-woodsmoke-400">No versions found.</p>
    </div>
  <% end %>
</div>
